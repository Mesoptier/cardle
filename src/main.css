@font-face {
    /* By https://www.haroldsfonts.com/font/card-characters */
    font-family: 'Card Characters';
    src: url('fonts/CardCharacters.woff2') format('woff2');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
}

:root {
    --card-white: hsl(0deg 0% 100%);
    --card-red: hsl(0deg 99% 60%);
    --card-black: hsl(0deg 0% 20%);
    --card-blue: hsl(240deg 100% 63%);
}

html {
    height: 100%;
    font-family: 'Card Characters', serif;
    color: var(--card-black);
}

body {
    height: 100%;
    margin: 0 auto;
    width: calc(min(100vw, 32rem) - 2rem);

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: stretch;
}

header {
    flex: 0;
    width: 100%;

    padding: 1rem 0 ;
    text-align: center;

    font-size: 1.5rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;

    border-bottom: 1px solid color-mix(in hsl, var(--card-black), transparent 50%);
}

main {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-sizing: border-box;
    margin: 1rem 0;
    gap: 1rem;
}

.card-area {
    flex: 1 0 auto;
    width: 100%;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.card-stack {
    flex: 1 0 auto;
    position: relative;

    --max-width: 12rem;
    --aspect-ratio: 0.62; /* Aspect ratio of the full 52-card stack. */

    aspect-ratio: var(--aspect-ratio);
    max-width: var(--max-width);
    max-height: calc(var(--max-width) / var(--aspect-ratio));

    display: flex;
    flex-direction: column-reverse;
    list-style: none;
    margin: 0;
    padding: 0;

    li {
        width: 100%;
    }

    .sizer {
        display: grid;
        height: fit-content;
        perspective: 1000px;
    }

    /* Create stack effect */
    li:not(:first-child) {
        height: .3%;
    }
    li:nth-child(2n):not(:last-child) {
        playing-card {
            border-bottom-color: hsl(0deg 0% 80%);
        }
    }

    playing-card {
        grid-area: 1/1;

        display: flex !important;
        border-radius: 8px;
        padding: 3%;
        border: 1px solid hsl(0deg 0% 60%);
        box-sizing: border-box;
        background: var(--card-white);

        backface-visibility: hidden;
        transform: rotateY(var(--flip));
        --flip: 0deg;

        &:nth-child(2) {
            --flip: 180deg;
        }
    }

    .sizer--animate-flip {
        playing-card {
            transition: transform 500ms ease;
            transform: translateZ(50px) rotateY(calc(var(--flip) - 180deg));
        }
    }

    .sizer--animate-exit {
        playing-card:nth-child(1) {
            display: none !important;
        }

        playing-card {
            transition: transform 500ms ease, opacity 400ms ease;
            transform: translateZ(50px) rotateZ(20deg);
            transform-origin: 50% 200%;
            opacity: 0;
        }
    }
}
